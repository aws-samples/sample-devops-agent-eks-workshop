image:
  repository: ${image_repository}
  tag: ${image_tag}

%{ if opentelemetry_enabled }
opentelemetry:
  enabled: true
  instrumentation: ${opentelemetry_instrumentation}
%{ endif }

%{ if application_signals_enabled }
# CloudWatch Application Signals auto-instrumentation (Node.js)
podAnnotations:
  instrumentation.opentelemetry.io/inject-nodejs: "true"
%{ endif }

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

# Disable Security Groups for Pods for EKS Auto Mode compatibility
securityGroups:
  create: false

app:
  persistence:
    provider: 'redis'
    redis:
      endpoint: '${redis_address}:${redis_port}'

  endpoints:
    orders: 'http://orders.orders.svc:80'