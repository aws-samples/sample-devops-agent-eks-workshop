image:
  repository: ${image_repository}
  tag: ${image_tag}

%{ if opentelemetry_enabled }
opentelemetry:
  enabled: true
  instrumentation: ${opentelemetry_instrumentation}
%{ endif }

%{ if application_signals_enabled }
# CloudWatch Application Signals auto-instrumentation (Java)
podAnnotations:
  instrumentation.opentelemetry.io/inject-java: "true"
%{ endif }

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

# Disable Security Groups for Pods for EKS Auto Mode compatibility
securityGroups:
  create: false

app:
  persistence:
    provider: 'postgres'
    endpoint: '${database_endpoint_host}:${database_endpoint_port}'
    database: '${database_name}'

    secret:
      username: ${database_username}
      password: "${database_password}"

  messaging:
    provider: 'rabbitmq'

    rabbitmq:
      addresses: ["${rabbitmq_endpoint}"]

      secret:
        username: ${rabbitmq_username}
        password: "${rabbitmq_password}"