image:
  repository: ${image_repository}
  tag: ${image_tag}

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70

app:
  endpoints:
    catalog: http://catalog.catalog.svc:80
    carts: http://carts.carts.svc:80
    orders: http://orders.orders.svc:80
    checkout: http://checkout.checkout.svc:80

%{ if opentelemetry_enabled }
opentelemetry:
  enabled: true
  instrumentation: ${opentelemetry_instrumentation}
%{ endif }

%{ if application_signals_enabled }
# CloudWatch Application Signals auto-instrumentation (Java)
podAnnotations:
  instrumentation.opentelemetry.io/inject-java: "true"
%{ endif }

%{ if istio_enabled }
istio:
  enabled: true
  hosts:
  - "*"
%{ else }
# Use ClusterIP for internal access via kubectl port-forward
service:
  type: ClusterIP
%{ endif }